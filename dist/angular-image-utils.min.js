angular.module("enrichit.angular-image-utils",[]),angular.module("enrichit.angular-image-utils").directive("iuSpinner",["$document","$compile","$http","$templateCache",function(e,n,i,r){"use strict";function t(n,i){for(var r=e.find(i);n.parentNode;){for(var t in r)if(r[t]===n)return r[t];n=n.parentNode}}function u(n,i){if(i){var r=e.find(t(n[0],i));if(r.length)return r}return n.parent()}return{restrict:"A",controller:["$element",function(e){this.triggerLoad=function(n){e.trigger("load")}}],link:function(e,t,a){var o=u(t,a.iuParentSelector);if(o){var l=a.iuLoadClass||"iu-load",c=a.iuCompleteClass||"iu-complete",s=a.iuErrorClass||"iu-error";o.addClass(l);var g=u(t,a.iuSpinnerContainer);a.iuTemplateString?g.append(n(a.iuTemplateString)(e)):a.iuTemplateUrl&&i.get(a.iuTemplateUrl,{cache:r}).success(function(i){g.append(n(i)(e))}),t.on("load",function(){o.addClass(c)}).on("error",function(){o.addClass(s),a.iuErrorReplaceString?t.replaceWith(n(a.iuErrorReplaceString)(e)):a.iuErrorReplaceUrl&&i.get(a.iuErrorReplaceUrl,{cache:r}).success(function(i){t.replaceWith(n(i)(e))})})}}}}]),angular.module("enrichit.angular-image-utils").directive("iuSizes",["$window",function(e){"use strict";function n(e){var n;try{n=window.getComputedStyle(e,null).getPropertyValue("width")}catch(i){n=e.currentStyle.height}return parseInt(n)}function i(e){e.css("width",""),e.css("height","")}function r(e,i,r,t){return function(){var u=i,a=r,o=e[0].parentElement;if(o){var l=n(o);(i>l||t===!0)&&(u=l,a=l/i*r)}e.css("width",u),e.css("height",a)}}var t=[];return angular.element(e).on("resize",function(){t.forEach(function(e){e instanceof Function&&e()})}),{restrict:"A",controller:["$element",function(e){this.triggerLoad=function(n){e.trigger("load")}}],link:function(e,n,u,a){var o=parseInt(u.iuWidth),l=parseInt(u.iuHeight),c=Boolean(u.iuScaleUp),s=r(n,o,l,c);s(),t.push(function(){s()});var g=t.length-1;n.on("load",function(){i(n),t[g]=null})}}}]),angular.module("enrichit.angular-image-utils").directive("iuImageElement",[function(){return{require:["?^iuSizes","?^iuSpinner"],link:function(e,n,i,r){n.on("load",function(){r[0]&&r[0].triggerLoad(),r[1]&&r[1].triggerLoad()})}}}]);