angular.module("enrichit.angular-image-utils",[]),angular.module("enrichit.angular-image-utils").directive("iuSpinner",["$document","$compile","$http","$templateCache",function(e,n,i,r){"use strict";function t(n,i){for(var r=e.find(i);n.parentNode;){for(var t in r)if(r[t]===n)return r[t];n=n.parentNode}}function u(n,i){if(i){var r=e.find(t(n[0],i));if(r.length)return r}return n.parent()}return{restrict:"A",controller:["$element",function(e){this.triggerLoad=function(n){e.trigger("load")}}],link:function(e,t,o){var a=u(t,o.iuParentSelector);if(a){var l=o.iuLoadClass||"iu-load",c=o.iuCompleteClass||"iu-complete",s=o.iuErrorClass||"iu-error";a.addClass(l);var d=u(t,o.iuSpinnerContainer);o.iuTemplateString?d.append(n(o.iuTemplateString)(e)):o.iuTemplateUrl&&i.get(o.iuTemplateUrl,{cache:r}).success(function(i){d.append(n(i)(e))}),t.on("load",function(){a.addClass(c)}).on("error",function(){a.addClass(s),o.iuErrorReplaceString?t.replaceWith(n(o.iuErrorReplaceString)(e)):o.iuErrorReplaceUrl&&i.get(o.iuErrorReplaceUrl,{cache:r}).success(function(i){t.replaceWith(n(i)(e))})})}}}}]),angular.module("enrichit.angular-image-utils").directive("iuSizes",["$window",function(e){"use strict";function n(){u.forEach(function(e){e instanceof Function&&e()})}function i(e){var n;try{n=window.getComputedStyle(e,null).getPropertyValue("width")}catch(i){n=e.currentStyle.height}return parseInt(n)}function r(e){e.css("width",""),e.css("height","")}function t(e,n,r,t){return function(){var u=n,o=r,a=e[0].parentElement;if(a){var l=i(a);(n>l||t===!0)&&(u=l,o=l/n*r)}e.css("width",u),e.css("height",o)}}var u=[];return"function"==typeof _&&_.VERSION&&_.debounce?_.debounce(n,100):(console.warn(["ALERT! lodash is not defined, make sure you have included the lodash before `angular-image-utils`. ","Resize events are not being debounced, this could cause undue stress on your poor browser when you resize the window."].join("")),angular.element(e).on("resize",n)),{restrict:"A",controller:["$element",function(e){this.triggerLoad=function(n){e.trigger("load")}}],link:function(e,n,i,o){var a=parseInt(i.iuWidth),l=parseInt(i.iuHeight),c=Boolean(i.iuScaleUp),s=t(n,a,l,c);s(),u.push(function(){s()});var d=u.length-1;n.on("load",function(){r(n),u[d]=null})}}}]),angular.module("enrichit.angular-image-utils").directive("iuImageElement",[function(){return{require:["?^iuSizes","?^iuSpinner"],link:function(e,n,i,r){n.on("load",function(){r[0]&&r[0].triggerLoad(),r[1]&&r[1].triggerLoad()})}}}]);