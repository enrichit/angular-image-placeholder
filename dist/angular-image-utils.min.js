angular.module("enrichit.angular-image-utils",[]),angular.module("enrichit.angular-image-utils").directive("iuSpinner",["$document","$compile","$http","$templateCache",function(e,n,t,r){"use strict";function i(n,t){for(var r=e.find(t);n.parentNode;){for(var i in r)if(r[i]===n)return r[i];n=n.parentNode}}function u(n,t){if(t){var r=e.find(i(n[0],t));if(r.length)return r}return n.parent()}return{restrict:"A",link:function(e,i,a){var l=u(i,a.iuParentSelector);if(l){var o=a.iuLoadClass||"iu-load",c=a.iuCompleteClass||"iu-complete",s=a.iuErrorClass||"iu-error";l.addClass(o);var f=u(i,a.iuSpinnerContainer);a.iuTemplateString?f.append(n(a.iuTemplateString)(e)):a.iuTemplateUrl&&t.get(a.iuTemplateUrl,{cache:r}).success(function(t){f.append(n(t)(e))}),i.on("load",function(){l.addClass(c)}).on("error",function(){l.addClass(s),a.iuErrorReplaceString?i.replaceWith(n(a.iuErrorReplaceString)(e)):a.iuErrorReplaceUrl&&t.get(a.iuErrorReplaceUrl,{cache:r}).success(function(t){i.replaceWith(n(t)(e))})})}}}}]),angular.module("enrichit.angular-image-utils").directive("iuSizes",["$window",function(e){"use strict";function n(e,n){null===n?e.removeAttr("width"):e.attr("width",n)}function t(e,n){null===n?e.removeAttr("height"):e.attr("height",n)}function r(e){var n;try{n=window.getComputedStyle(e,null).getPropertyValue("width")}catch(t){n=e.currentStyle.height}return parseInt(n)}function i(e){n(e,null),t(e,null)}function u(e,i,u,a){return function(){var l=i,o=u,c=e[0].parentElement;if(c){var s=r(c);(i>s||a===!0)&&(l=s,o=s/i*u)}n(e,l),t(e,o)}}var a=[];return angular.element(e).on("resize",function(){a.forEach(function(e){e instanceof Function&&e()})}),{restrict:"A",controller:["$element",function(e){this.triggerLoad=function(n){e.trigger("load")}}],link:function(e,n,t,r){var l=parseInt(t.iuWidth),o=parseInt(t.iuHeight),c=Boolean(t.iuScaleUp),s=u(n,l,o,c);s(),a.push(function(){s()});var f=a.length-1;n.on("load",function(){i(n),a[f]=null})}}}]),angular.module("enrichit.angular-image-utils").directive("iuSizesImageElement",[function(){return{require:"?^iuSizes",link:function(e,n,t,r){n.on("load",function(){r.triggerLoad()})}}}]);