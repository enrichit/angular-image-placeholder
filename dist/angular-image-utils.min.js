angular.module("enrichit.angular-image-utils",[]),angular.module("enrichit.angular-image-utils").directive("iuSpinner",["$document","$compile","$http","$templateCache",function(e,r,t,n){"use strict";function i(r,t){for(var n=e.find(t);r.parentNode;){for(var i in n)if(n[i]===r)return n[i];r=r.parentNode}}function a(r,t){if(t){var n=e.find(i(r[0],t));if(n.length)return n}return r.parent()}return{restrict:"A",link:function(e,i,u){var l=a(i,u.iuParentSelector);if(l){var o=u.iuLoadClass||"iu-load",c=u.iuCompleteClass||"iu-complete",s=u.iuErrorClass||"iu-error";l.addClass(o);var p=a(i,u.iuSpinnerContainer);u.iuTemplateString?p.append(r(u.iuTemplateString)(e)):u.iuTemplateUrl&&t.get(u.iuTemplateUrl,{cache:n}).success(function(t){p.append(r(t)(e))}),i.on("load",function(){l.addClass(c)}).on("error",function(){l.addClass(s),u.iuErrorReplaceString?i.replaceWith(r(u.iuErrorReplaceString)(e)):u.iuErrorReplaceUrl&&t.get(u.iuErrorReplaceUrl,{cache:n}).success(function(t){i.replaceWith(r(t)(e))})})}}}}]),angular.module("enrichit.angular-image-utils").directive("iuSizes",["$window",function(e){"use strict";function r(e){var r;try{r=window.getComputedStyle(e,null).getPropertyValue("width")}catch(t){r=e.currentStyle.height}return parseInt(r)}function t(e,t,n,i){return function(){var a=t,u=n,l=e[0].parentElement;if(l){var o=r(l);(t>o||i===!0)&&(a=o,u=o/t*n)}e.attr("width",a),e.attr("height",u)}}var n=[];return angular.element(e).on("resize",function(){n.forEach(function(e){e instanceof Function&&e()})}),{restrict:"A",link:function(e,r,i){var a=parseInt(i.iuWidth),u=parseInt(i.iuHeight),l=Boolean(i.iuScaleUp),o=t(r,a,u,l);o(),n.push(function(){o()});var c=n.length-1;r.on("load",function(){r.removeAttr("width"),r.removeAttr("height"),n[c]=null})}}}]);